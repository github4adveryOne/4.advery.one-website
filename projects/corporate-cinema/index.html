<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Corporate Cinema | Programmplaner</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="https://alcdn.msauth.net/browser/2.24.0/js/msal-browser.min.js"></script>
  <style>
    body { background: #020617; color: #f8fafc; font-family: 'Inter', sans-serif; }
    .glass { background: rgba(30, 41, 59, 0.4); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.08); }
    .modal { background: rgba(2, 6, 23, 0.96); backdrop-filter: blur(20px); z-index: 100; }
    
    /* Calendar Grid Responsiveness */
    .calendar-grid { 
        display: grid; 
        grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
        gap: 1px;
        background: rgba(255, 255, 255, 0.05);
    }
    
    .calendar-day { 
        background: #020617;
        min-height: 250px; 
        transition: all 0.3s ease;
        padding: 1rem;
    }
    
    .calendar-day.today { background: rgba(34, 211, 238, 0.03); }
    
    /* Movie Mini Card */
    .mini-movie {
        position: relative;
        border-radius: 0.75rem;
        overflow: hidden;
        aspect-ratio: 2/3;
        margin-bottom: 0.5rem;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .mini-movie:hover { transform: scale(1.05); z-index: 10; border-color: #22d3ee; box-shadow: 0 10px 20px rgba(0,0,0,0.4); }
    
    .mini-movie-info {
        position: absolute;
        bottom: 0; left: 0; right: 0;
        padding: 0.5rem;
        background: linear-gradient(to top, rgba(2, 6, 23, 0.95), transparent);
    }
    
    .mini-movie.greenlit { border-color: #22d3ee; }
    .mini-movie.greenlit::after {
        content: 'FREIGEGEBEN';
        position: absolute;
        top: 0.5rem; right: 0.5rem;
        background: #22d3ee; color: #020617;
        font-size: 8px; font-weight: 900;
        padding: 2px 4px; border-radius: 4px;
        letter-spacing: 0.05em;
    }

    .poster-loading-shimmer {
        background: linear-gradient(90deg, #0f172a 25%, #1e293b 50%, #0f172a 75%);
        background-size: 200% 100%;
        animation: shimmer 2s infinite;
    }
    @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
    /* Fix for datetime-local icon color in some browsers */
    input[type="datetime-local"]::-webkit-calendar-picker-indicator {
        filter: invert(1);
    }
    
    .status-badge {
        font-size: 8px;
        font-weight: 900;
        padding: 2px 6px;
        border-radius: 4px;
        letter-spacing: 0.05em;
        text-transform: uppercase;
    }
    .status-processing { background: #94a3b8; color: #020617; }
    .status-failed { background: #ef4444; color: #ffffff; }
    
    /* Animated background */
    body::before {
        content: "";
        position: fixed;
        top: 0; left: 0; width: 100%; height: 100%;
        background: radial-gradient(circle at 50% 50%, rgba(34, 211, 238, 0.05) 0%, transparent 50%);
        pointer-events: none;
        z-index: -1;
    }
  </style>
</head>
<body class="min-h-screen">
  <!-- Auth Screen -->
  <div id="auth-screen" class="min-h-screen flex items-center justify-center p-6">
    <div class="glass max-w-md w-full p-10 text-center rounded-[2.5rem] shadow-2xl">
      <i data-lucide="clapperboard" class="h-16 w-16 text-cyan-400 mx-auto mb-6"></i>
      <h1 class="text-4xl font-black mb-2 tracking-tight uppercase">Corporate Cinema</h1>
      <p class="text-slate-400 mb-10 text-lg italic">Wissen ist das neue Blockbuster-Kino.</p>
      <button id="login-btn" class="w-full bg-white text-slate-900 px-6 py-4 rounded-2xl flex items-center justify-center gap-4 hover:bg-cyan-50 transition-all font-bold uppercase tracking-widest text-sm shadow-xl shadow-cyan-500/10">
        Mitarbeiter-Login
      </button>
    </div>
  </div>

  <!-- Main App -->
  <div id="app-screen" class="hidden min-h-screen">
    <nav class="border-b border-slate-800 bg-slate-950/50 sticky top-0 z-50 backdrop-blur-md">
        <div class="max-w-[1600px] mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-4">
                <i data-lucide="film" class="h-8 w-8 text-cyan-500"></i>
                <div>
                    <h2 class="font-black uppercase tracking-tighter leading-none">Corporate Cinema</h2>
                    <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">Programm√ºbersicht</p>
                </div>
            </div>
            <div class="flex items-center gap-6">
                <button onclick="document.getElementById('how-to-guide').classList.toggle('hidden')" class="hidden md:flex items-center gap-2 text-cyan-400 hover:text-cyan-300 transition font-bold text-xs uppercase tracking-widest">
                    <i data-lucide="help-circle" class="h-4 w-4"></i>
                    How It Works
                </button>
                <div class="flex items-center gap-2 bg-slate-900 px-3 py-1.5 rounded-full border border-slate-800">
                    <span class="w-2 h-2 rounded-full bg-cyan-500 animate-pulse"></span>
                    <span id="user-display" class="text-xs font-black uppercase text-slate-300"></span>
                </div>
                <button id="logout-btn" class="text-slate-500 hover:text-red-400 transition"><i data-lucide="log-out" class="h-5 w-5"></i></button>
            </div>
        </div>
    </nav>

    <main class="max-w-[1600px] mx-auto p-6 lg:p-10">
        <section class="mb-12 flex flex-col lg:flex-row justify-between items-end gap-8">
            <div class="max-w-3xl">
                <h1 class="text-6xl font-black tracking-tighter mb-4 uppercase leading-none">Filmreife <span class="text-cyan-500">Vortr√§ge.</span></h1>
                <p class="text-slate-400 text-lg leading-relaxed">Entdecke das Wissen deiner Kollegen. Jede Pr√§sentation ist ein kompakter 10-Minuten-Input ohne lange Diskussionen. Sichere dir dein Ticket, um die Premiere freizuschalten. <span class="text-orange-500 font-bold">Ohne genug Zuschauer, kein Kinostart!</span></p>
                
                <!-- Call-to-Action Button for New Users -->
                <div class="mt-8 flex flex-wrap items-center gap-4">
                    <button onclick="toggleHowToGuide()" class="bg-gradient-to-r from-cyan-500 to-emerald-500 text-white px-8 py-4 rounded-2xl font-black hover:opacity-90 transition flex items-center gap-3 shadow-lg shadow-cyan-500/20 uppercase tracking-tight text-sm">
                        <i data-lucide="clock" class="h-5 w-5"></i>
                        Wie 10-Minuten-Wissen funktioniert
                    </button>
                    <span class="text-slate-500 text-sm italic hidden md:inline">Lerne das Konzept hinter unseren effizienten Wissenssessions kennen</span>
                </div>
            </div>
            <div class="flex flex-wrap items-center gap-4">
                <div class="flex flex-col gap-2">
                    <label class="text-[10px] font-black uppercase tracking-widest text-slate-500">Zeitraum w√§hlen</label>
                    <div class="flex glass p-1 rounded-xl">
                        <button onclick="setDays(7)" id="btn-7" class="px-4 py-2 rounded-lg text-xs font-black uppercase transition">7 Tage</button>
                        <button onclick="setDays(14)" id="btn-14" class="px-4 py-2 rounded-lg text-xs font-black uppercase transition">14 Tage</button>
                        <button onclick="setDays(30)" id="btn-30" class="px-4 py-2 rounded-lg text-xs font-black uppercase transition">30 Tage</button>
                    </div>
                </div>
                <button id="open-pitch-modal" class="bg-cyan-500 text-slate-950 px-8 py-5 rounded-2xl font-black hover:bg-cyan-400 transition shadow-lg shadow-cyan-500/20 uppercase tracking-tight text-sm">
                    Eigenen Film Pitchen
                </button>
            </div>
        </section>

        <!-- Calendar Grid -->
        <div id="calendar-grid" class="calendar-grid rounded-[2.5rem] overflow-hidden border border-slate-800 shadow-3xl mb-12">
            <!-- Days generated by JS -->
        </div>

        <!-- How It Works Section -->
        <section class="glass rounded-[2.5rem] p-8 md:p-12 mb-12 border border-slate-800">
            <div class="flex flex-col lg:flex-row items-start gap-8 md:gap-12">
                <div class="lg:w-2/3">
                    <h2 class="text-3xl md:text-4xl font-black mb-6 tracking-tighter uppercase">üé¨ Das Konzept: Wissen als Kurzfilm</h2>
                    <div class="space-y-6">
                        <div class="flex items-start gap-4">
                            <div class="bg-cyan-500/10 p-3 rounded-xl shrink-0">
                                <i data-lucide="clock" class="h-6 w-6 text-cyan-400"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold mb-2 text-white">1. 10-Minuten-Format</h3>
                                <p class="text-slate-400">Jeder "Film" ist ein kompakter 10-Minuten-Input. Keine langen Pr√§sentationen, keine ausufernden Diskussionen. Nur reines, fokussiertes Wissen ‚Äì wie ein TED Talk f√ºr interne Expertise.</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-4">
                            <div class="bg-emerald-500/10 p-3 rounded-xl shrink-0">
                                <i data-lucide="mic" class="h-6 w-6 text-emerald-400"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold mb-2 text-white">2. One-Way Knowledge Transfer</h3>
                                <p class="text-slate-400">Der Referent pr√§sentiert sein Wissen ohne Unterbrechungen. Fragen werden auf ein Minimum beschr√§nkt ‚Äì das Ziel ist effiziente Wissensvermittlung, nicht Diskussion. Perfekt f√ºr Prozesse, Tools oder Quick-Tipps.</p>
                            </div>
                        </div>
                        
                        <div class="flex items-start gap-4">
                            <div class="bg-orange-500/10 p-3 rounded-xl shrink-0">
                                <i data-lucide="ticket" class="h-6 w-6 text-orange-400"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-bold mb-2 text-white">3. Crowd-Funding f√ºr Wissen</h3>
                                <p class="text-slate-400">Erst wenn gen√ºgend Interesse (Tickets) da ist, findet die Session statt. So vermeiden wir leere "Kinos√§le" und stellen sicher, dass Wissen nur geteilt wird, wenn es auch nachgefragt wird.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="lg:w-1/3 glass rounded-2xl p-6 border border-slate-800">
                    <h3 class="text-xl font-black mb-4 uppercase tracking-tight">‚è±Ô∏è Das 10-Minuten-Versprechen</h3>
                    <p class="text-slate-400 mb-4 text-sm">Corporate Cinema revolutioniert Meetings: Statt stundenlanger Diskussionen gibt es kompakte Wissensh√§ppchen. Jeder "Film" ist auf Effizienz optimiert.</p>
                    <div class="space-y-3 text-sm">
                        <div class="flex items-center gap-2">
                            <i data-lucide="zap" class="h-4 w-4 text-amber-500"></i>
                            <span class="text-slate-300">Maximal 10 Minuten pro Session</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i data-lucide="mic-off" class="h-4 w-4 text-rose-500"></i>
                            <span class="text-slate-300">Minimale Fragen, maximaler Input</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <i data-lucide="brain" class="h-4 w-4 text-cyan-500"></i>
                            <span class="text-slate-300">Fokussiertes Fachwissen statt Diskussion</span>
                        </div>
                    </div>
                    <div class="mt-6 pt-4 border-t border-slate-800">
                        <p class="text-xs text-slate-500 italic">Perfekt f√ºr: Tool-Demos, Prozess-Erkl√§rungen, Quick-Tipps, Best Practices</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- How-To Guide (hidden by default, shown when clicking the button) -->
        <div id="how-to-guide" class="hidden glass rounded-[2.5rem] p-8 md:p-12 mb-12 border border-slate-800">
            <div class="flex justify-between items-start mb-8">
                <h2 class="text-3xl md:text-4xl font-black tracking-tighter uppercase">üìñ Schnellstart-Anleitung</h2>
                <button onclick="document.getElementById('how-to-guide').classList.add('hidden')" class="text-slate-500 hover:text-white p-2">
                    <i data-lucide="x" class="h-6 w-6"></i>
                </button>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div class="space-y-6">
                    <h3 class="text-xl font-bold text-white mb-4">üéØ Als Zuschauer</h3>
                    <ol class="space-y-4">
                        <li class="flex items-start gap-3">
                            <span class="bg-cyan-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shrink-0">1</span>
                            <span class="text-slate-300">Durchst√∂bere den Kalender nach interessanten Themen</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="bg-cyan-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shrink-0">2</span>
                            <span class="text-slate-300">Klicke auf einen Film, um Details zu sehen</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="bg-cyan-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shrink-0">3</span>
                            <span class="text-slate-300">Sichere dir ein Ticket mit "Platz reservieren"</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="bg-cyan-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shrink-0">4</span>
                            <span class="text-slate-300">Erhalte eine Benachrichtigung, wenn der Vortrag freigegeben wird</span>
                        </li>
                    </ol>
                </div>
                
                <div class="space-y-6">
                    <h3 class="text-xl font-bold text-white mb-4">üé§ Als Referent</h3>
                    <ol class="space-y-4">
                        <li class="flex items-start gap-3">
                            <span class="bg-emerald-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shrink-0">1</span>
                            <span class="text-slate-300">Klicke auf "Eigenen Film Pitchen" oben rechts</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="bg-emerald-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shrink-0">2</span>
                            <span class="text-slate-300">Beschreibe dein Thema ‚Äì unsere KI hilft beim Titel</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="bg-emerald-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shrink-0">3</span>
                            <span class="text-slate-300">Setze die Mindestteilnehmerzahl und den Termin</span>
                        </li>
                        <li class="flex items-start gap-3">
                            <span class="bg-emerald-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold shrink-0">4</span>
                            <span class="text-slate-300">Warte auf gen√ºgend Tickets ‚Äì dann geht's los!</span>
                        </li>
                    </ol>
                </div>
            </div>
            
            <div class="mt-10 pt-8 border-t border-slate-800">
                <h3 class="text-xl font-bold text-white mb-4">üí° Tipps f√ºr 10-Minuten-Wissen</h3>
                <ul class="grid md:grid-cols-2 gap-4 text-slate-300">
                    <li class="flex items-center gap-3"><i data-lucide="clock" class="h-5 w-5 text-amber-500"></i> <strong>Strict 10-minute rule:</strong> √úbe mit Timer</li>
                    <li class="flex items-center gap-3"><i data-lucide="mic-off" class="h-5 w-5 text-rose-500"></i> <strong>No Q&A during:</strong> Fragen nur am Ende (1-2 max)</li>
                    <li class="flex items-center gap-3"><i data-lucide="zap" class="h-5 w-5 text-cyan-500"></i> <strong>One key message:</strong> Fokus auf einen Kernpunkt</li>
                    <li class="flex items-center gap-3"><i data-lucide="target" class="h-5 w-5 text-emerald-500"></i> <strong>Actionable takeaways:</strong> Was k√∂nnen Zuschauer sofort umsetzen?</li>
                </ul>
                <div class="mt-6 p-4 bg-slate-900/50 rounded-xl border border-slate-800">
                    <p class="text-sm text-slate-400 italic">üéØ <strong>Ideal f√ºr:</strong> "How I fixed X", "Quick intro to Y", "Our process for Z", "Tool tip that saved me hours"</p>
                </div>
            </div>
        </div>
    </main>
  </div>

  <!-- Detail Modal -->
  <div id="detail-modal" class="fixed inset-0 modal hidden items-center justify-center p-4 md:p-6 overflow-y-auto">
    <div class="glass max-w-4xl w-full rounded-[2rem] md:rounded-[3rem] overflow-hidden shadow-2xl flex flex-col md:flex-row relative border-slate-700/50 my-auto">
      <button onclick="closeDetail()" class="absolute top-4 right-4 md:top-6 md:right-6 p-2 bg-black/50 hover:bg-black rounded-full text-white z-20 transition"><i data-lucide="x"></i></button>
      
      <div class="w-full md:w-5/12 h-64 md:h-auto poster-placeholder relative shrink-0">
        <img id="detail-poster" src="" class="w-full h-full object-cover hidden" />
        <div id="detail-poster-loading" class="absolute inset-0 flex flex-col items-center justify-center text-slate-500 gap-3">
            <i data-lucide="loader" class="h-10 w-10 animate-spin text-cyan-500"></i>
            <span class="text-[10px] font-black uppercase tracking-widest italic">KI erstellt Filmplakat...</span>
        </div>
      </div>

      <div class="p-6 md:p-12 flex-1 flex flex-col justify-between bg-slate-900/60 overflow-y-auto">
        <div>
          <div class="flex justify-between items-start mb-4 md:mb-6">
            <div class="flex items-center gap-3">
                <span class="bg-cyan-500/10 text-cyan-500 text-[10px] font-black uppercase tracking-widest px-3 py-1 rounded-full border border-cyan-500/20">Wissenstransfer</span>
                <span id="greenlight-badge" class="hidden bg-emerald-500/10 text-emerald-500 text-[10px] font-black uppercase tracking-widest px-3 py-1 rounded-full border border-emerald-500/20">FREIGEGEBEN</span>
            </div>
            <div id="owner-actions" class="hidden">
                <button id="delete-btn" class="flex items-center gap-2 text-red-500 hover:text-red-400 font-black text-[10px] transition uppercase tracking-widest">
                    <i data-lucide="trash-2" class="h-4 w-4"></i> Film absagen
                </button>
            </div>
          </div>
          <h2 id="detail-title" class="text-3xl md:text-5xl font-black mb-4 md:mb-6 tracking-tighter leading-[0.9]"></h2>
          <p id="detail-desc" class="text-slate-400 leading-relaxed mb-6 md:mb-10 text-base md:text-lg"></p>
          
          <div class="grid grid-cols-2 gap-4 md:gap-8 mb-6 md:mb-10 border-t border-slate-800 pt-6 md:pt-8">
            <div>
                <span class="block text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2">Regie</span>
                <div class="flex items-center gap-3">
                    <div id="detail-avatar" class="w-8 h-8 rounded-full bg-slate-800 flex items-center justify-center text-[10px] font-black text-cyan-500"></div>
                    <span id="detail-director" class="font-bold text-white uppercase text-sm"></span>
                </div>
            </div>
            <div>
                <span class="block text-[10px] font-black text-slate-500 uppercase tracking-widest mb-2">Kinostart</span>
                <span id="detail-date" class="font-bold text-white uppercase text-sm"></span>
            </div>
          </div>
        </div>

        <div class="space-y-6">
            <div class="glass p-6 rounded-3xl border-slate-700/30">
                <div class="flex justify-between items-center mb-3">
                    <span class="text-[10px] font-black text-slate-500 uppercase tracking-widest italic">Zuschauer-Resonanz</span>
                    <span id="detail-ticket-count" class="text-sm font-black text-cyan-400"></span>
                </div>
                <div class="h-3 w-full bg-slate-950 rounded-full overflow-hidden mb-4 p-0.5 border border-slate-800">
                    <div id="detail-progress" class="h-full bg-gradient-to-r from-cyan-600 to-cyan-400 rounded-full transition-all duration-1000" style="width: 0%"></div>
                </div>
                <p id="greenlight-hint" class="text-[10px] text-slate-500 font-medium">Sobald die Schwelle erreicht ist, wird die Premiere automatisch als Teams-Meeting geplant.</p>
            </div>
            <button id="buy-btn" class="w-full py-6 bg-cyan-500 text-slate-950 rounded-[1.5rem] font-black tracking-tight hover:bg-cyan-400 hover:scale-[1.01] transition-all uppercase text-lg shadow-xl shadow-cyan-900/20">Ticket sichern</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Pitch Modal -->
  <div id="pitch-modal" class="fixed inset-0 modal hidden items-center justify-center p-6">
    <div class="glass max-w-xl w-full p-12 rounded-[3.5rem] shadow-2xl relative border-cyan-500/20">
      <button id="close-pitch-modal" class="absolute top-8 right-8 text-slate-500 hover:text-white"><i data-lucide="x"></i></button>
      <div class="mb-10">
          <h2 class="text-4xl font-black mb-2 tracking-tight uppercase">Film-Pitch einreichen</h2>
          <p class="text-slate-400 text-sm">Was ist das Thema deines 10-Minuten-Blockbusters?</p>
      </div>
      <form id="pitch-form" class="space-y-8">
        <div class="space-y-6">
          <div>
            <label class="block text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 ml-1">Handlung / Kernbotschaft</label>
            <textarea id="pitch-desc" required rows="4" class="w-full bg-slate-950 border border-slate-800 rounded-2xl px-5 py-4 focus:border-cyan-500 transition outline-none text-white leading-relaxed" placeholder="Beschreibe kurz dein Thema. Unsere KI erstellt daraus einen Filmtitel und ein Plakat."></textarea>
          </div>
          <div class="grid grid-cols-2 gap-6">
            <div>
              <label class="block text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 ml-1">Premiere Datum</label>
              <input type="date" id="pitch-date" required class="w-full bg-slate-950 border border-slate-800 rounded-2xl px-5 py-4 focus:border-cyan-500 transition outline-none text-white text-sm [color-scheme:dark]" />
            </div>
            <div>
              <label class="block text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 ml-1">Uhrzeit</label>
              <input type="time" id="pitch-time" required min="10:00" max="15:59" class="w-full bg-slate-950 border border-slate-800 rounded-2xl px-5 py-4 focus:border-cyan-500 transition outline-none text-white text-sm [color-scheme:dark]" />
            </div>
            <div class="col-span-2">
              <label class="block text-[10px] font-black uppercase tracking-widest text-slate-500 mb-3 ml-1">Ticket-Limit</label>
              <input type="number" id="pitch-threshold" value="5" min="1" class="w-full bg-slate-950 border border-slate-800 rounded-2xl px-5 py-4 focus:border-cyan-500 transition outline-none text-white" />
            </div>
          </div>
        </div>
        <button type="submit" id="submit-pitch" class="w-full bg-white text-slate-950 py-5 rounded-2xl font-black hover:bg-cyan-400 transition uppercase tracking-widest text-sm shadow-xl shadow-cyan-900/20">Projekt Ver√∂ffentlichen</button>
      </form>
    </div>
  </div>

  <!-- AI Modal -->
  <div id="ai-modal" class="fixed inset-0 modal hidden items-center justify-center p-6">
    <div class="glass max-w-md w-full p-12 rounded-[3.5rem] shadow-2xl text-center border-cyan-500/20">
      <div class="flex justify-center mb-8"><div class="bg-cyan-500/20 p-6 rounded-full shadow-lg"><i data-lucide="sparkles" class="h-12 w-12 text-cyan-400"></i></div></div>
      <h2 class="text-xs font-black uppercase tracking-[0.5em] text-cyan-500 mb-4">Script-Check abgeschlossen</h2>
      <p class="text-slate-400 text-sm mb-8 px-4">Unsere KI-Filmagentur hat basierend auf deiner Beschreibung folgenden Titel festgelegt:</p>
      <h3 id="ai-generated-title" class="text-4xl font-black italic mb-12 tracking-tighter text-white uppercase leading-[0.85]"></h3>
      <button id="close-ai-modal" class="w-full bg-white text-black py-5 rounded-2xl font-black hover:bg-cyan-400 transition uppercase text-xs tracking-widest">In den Spielplan aufnehmen</button>
    </div>
  </div>

  <div id="toast" class="fixed bottom-10 right-10 glass px-6 py-4 rounded-2xl translate-y-20 opacity-0 transition-all duration-300 z-[200] flex items-center gap-3 border-cyan-500/50">
    <i data-lucide="info" class="text-cyan-400"></i><span id="toast-msg" class="font-bold text-sm text-white"></span>
  </div>

  <script>
    const TENANT_ID = "b2057218-c748-4a02-a220-1309d3034ba1";
    const msalConfig = {
      auth: { 
        clientId: "6ff61b4c-46af-4452-b405-5b359e83c843", 
        authority: `https://login.microsoftonline.com/${TENANT_ID}`, 
        redirectUri: window.location.origin + "/cinema/", 
        navigateToLoginRequestUrl: true  // Changed to true for better mobile handling
      },
      cache: { 
        cacheLocation: "localStorage", 
        storeAuthStateInCookie: true 
      },
      system: {
        allowNativeBroker: false,  // Disable native broker for mobile web
        windowHashTimeout: 10000,  // Increase timeout for mobile
        iframeHashTimeout: 10000,
        loadFrameTimeout: 10000
      }
    };
    let msalInstance, currentUser, allMovies = [], selectedMovie = null, calendarDays = 7;
    let lastUpdateTime = null;
    const imageCache = new Map();

    async function init() {
      console.log("MSAL init starting... URL:", window.location.href, "Hash:", window.location.hash);
      try {
        msalInstance = new msal.PublicClientApplication(msalConfig);
        await msalInstance.initialize();
        
        // Initial load of movies while auth is initializing to speed up perceived performance
        loadMovies();
        
        // Enhanced hash_empty_error handling with mobile-specific recovery
        try {
            const resp = await msalInstance.handleRedirectPromise();
            if (resp) {
                console.log("Redirect detected and processed successfully:", resp);
                currentUser = resp.account;
                // Clear hash after successful redirect processing
                if (window.location.hash) {
                    console.log("Clearing hash after successful auth:", window.location.hash);
                    window.location.hash = "";
                }
                showApp();
                return; // Skip cache check since we already have a user
            }
        } catch (hashError) {
            console.warn("Caught error in handleRedirectPromise:", hashError);
            // Special handling for hash_empty_error on mobile
            if (hashError.errorCode === "hash_empty_error" || (hashError.message && hashError.message.includes("hash_empty_error"))) {
                console.warn("hash_empty_error detected. This often happens on mobile browsers.");
                
                // Check if we have state in sessionStorage (MSAL might have saved it)
                let hasValidState = false;
                for (let i = 0; i < sessionStorage.length; i++) {
                    const key = sessionStorage.key(i);
                    if (key?.includes("msal.") && key?.includes("state")) {
                        console.log("Found MSAL state in sessionStorage:", key);
                        hasValidState = true;
                        break;
                    }
                }
                
                if (hasValidState) {
                    console.log("MSAL state exists but hash is empty. This suggests the hash was lost during redirect.");
                    // Try to recover by checking cache - user might have been logged in before
                }
                
                // Clear any problematic hash fragments
                if (window.location.hash) {
                    console.log("Clearing problematic hash:", window.location.hash);
                    window.location.hash = "";
                }
                
                // Don't throw - continue to cache check
            } else {
                console.error("Non-hash error in handleRedirectPromise:", hashError);
                // Re-throw other errors
                throw hashError;
            }
        }
        
        // Check cache for existing accounts (fallback for hash_empty_error or no redirect)
        const accounts = msalInstance.getAllAccounts();
        console.log("All accounts in cache:", accounts.length, "accounts");
        
        if (accounts.length > 0) {
          currentUser = accounts[0];
          console.log("Active user from cache:", currentUser.username);
          showApp();
        } else if (currentUser) {
          showApp();
        } else {
          console.log("No user found in cache and no redirect was processed.");
          // User will need to click login
        }
      } catch (e) { 
        console.error("Critical MSAL init error:", e);
        // Show error to user but don't prevent the page from loading
        showToast("Initialisierung fehlgeschlagen: " + e.message);
      }
      lucide.createIcons();
    }

    function showApp() {
      document.getElementById("auth-screen").classList.add("hidden");
      document.getElementById("app-screen").classList.remove("hidden");
      document.getElementById("user-display").textContent = currentUser.name;
      setDays(calendarDays);
      setInterval(loadMovies, 10000); // BANDWIDTH OPTIMIZATION: 10s polling
    }

    function setDays(n) {
        console.log("Setting days to:", n);
        calendarDays = n;
        [7, 14, 30].forEach(d => {
            const btn = document.getElementById(`btn-${d}`);
            if (btn) {
                if (d === n) {
                    btn.classList.add('bg-cyan-500', 'text-slate-950');
                    btn.classList.remove('text-slate-500', 'hover:text-white');
                } else {
                    btn.classList.remove('bg-cyan-500', 'text-slate-950');
                    btn.classList.add('text-slate-500', 'hover:text-white');
                }
            }
        });
        renderCalendar();
    }

    
// ==================== BANDWIDTH OPTIMIZATION: Lazy Image Loading ====================
async function loadMovieImage(movieId, imgElement) {
  // Check cache first
  if (imageCache.has(movieId)) {
    imgElement.src = imageCache.get(movieId);
    imgElement.classList.remove('loading');
    return;
  }
  
  // Show loading state
  imgElement.classList.add('loading');
  
  try {
    const response = await fetch(`/api/n8n/image/${movieId}`);
    if (response.ok) {
      const blob = await response.blob();
      const imageUrl = URL.createObjectURL(blob);
      imageCache.set(movieId, imageUrl);
      imgElement.src = imageUrl;
      imgElement.classList.remove('loading');
    } else {
      console.warn(`Image not found for movie ${movieId}`);
      imgElement.classList.add('error');
    }
  } catch (error) {
    console.error(`Failed to load image for movie ${movieId}:`, error);
    imgElement.classList.add('error');
  }
}
async function loadMovies() {
      let url = '/api/n8n/get-movies';
      if (lastUpdateTime) {
        // BANDWIDTH OPTIMIZATION: Use incremental updates
        url = `/api/n8n/get-movies-since?since=${encodeURIComponent(lastUpdateTime)}`;
      }
      
      const res = await fetch(url);
      const newMovies = await res.json();
      
      // Handle the response
      if (newMovies.length === 0) {
        // Empty response means no changes since lastUpdateTime
        return; // Don't change anything
      }
      
      // Update lastUpdateTime to the latest updated_at
      const timestamps = newMovies.map(m => m.updated_at).filter(t => t);
      if (timestamps.length > 0) {
        lastUpdateTime = timestamps.sort().reverse()[0];
      }
      
      // Create a map of new movies by id for easy lookup
      const newMoviesMap = new Map();
      newMovies.forEach(movie => {
        newMoviesMap.set(movie.id, movie);
      });
      
      // Update existing movies and add new ones
      const updatedMovies = [];
      let hasChanges = false;
      
      // First, check existing movies
      for (const existingMovie of allMovies) {
        if (newMoviesMap.has(existingMovie.id)) {
          // Movie exists in new data - update it
          const newMovie = newMoviesMap.get(existingMovie.id);
          // Preserve posterUrl if not in new data
          if (!newMovie.posterUrl && existingMovie.posterUrl) {
            newMovie.posterUrl = existingMovie.posterUrl;
          }
          // Only add if not cancelled
          if (!newMovie.isCancelled) {
            updatedMovies.push(newMovie);
          }
          newMoviesMap.delete(existingMovie.id); // Remove from map so we don't add it again
          hasChanges = true;
        } else {
          // Movie not in new data - it hasn't changed OR was deleted
          // Keep it (if it was deleted, API would have sent it with isCancelled=1)
          updatedMovies.push(existingMovie);
        }
      }
      
      // Add any remaining new movies (these are brand new)
      for (const [id, movie] of newMoviesMap) {
        // Only add if not cancelled
        if (!movie.isCancelled) {
          updatedMovies.push(movie);
          hasChanges = true;
        }
      }
      
      // Only update if there were changes
      if (hasChanges) {
        allMovies = updatedMovies;
        renderCalendar();
      }

      if (selectedMovie) {
        const updated = allMovies.find(m => m.id === selectedMovie.id);
        if (updated) {
          updateDetailUI(updated);
        } else {
          // Movie was cancelled or deleted, close detail view
          closeDetail();
        }
      }
    }

    function renderCalendar() {
      const grid = document.getElementById("calendar-grid");
      grid.innerHTML = "";
      
      // Use local date for "today" calculation to avoid UTC shifting
      const now = new Date();
      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());

      // Animation stagger
      let movieCount = 0;
      let addedDays = 0;
      let currentOffset = 0;

      while (addedDays < calendarDays) {
        const day = new Date(today);
        day.setDate(today.getDate() + currentOffset);
        currentOffset++;

        const isWeekend = [0, 6].includes(day.getDay());
        if (isWeekend) continue; // Skip weekends entirely
        
        // Format local YYYY-MM-DD for comparison
        const offset = day.getTimezoneOffset() * 60000;
        const dayStr = new Date(day.getTime() - offset).toISOString().split('T')[0];
        
        const dayMovies = allMovies.filter(m => {
            // Compare only the date part
            const movieDate = m.premierAt.split('T')[0];
            return movieDate === dayStr;
        });
        
        const isToday = dayStr === now.toISOString().split('T')[0];

        const dayEl = document.createElement("div");
        dayEl.className = `calendar-day ${isToday ? 'today' : ''}`;
        dayEl.innerHTML = `<div class="mb-4 flex items-center justify-between"><span class="text-[10px] font-black ${isToday ? 'text-cyan-400 underline underline-offset-4' : 'text-slate-600'} uppercase">${day.toLocaleDateString('de-DE', {weekday:'short'})} ${day.getDate()}. ${day.toLocaleDateString('de-DE', {month:'short'})}</span></div>`;
        
        if (dayMovies.length === 0) {
            const emptyHint = document.createElement("div");
            emptyHint.className = "h-full flex items-center justify-center border border-dashed border-slate-800/50 rounded-2xl opacity-20 hover:opacity-100 hover:border-cyan-500/50 cursor-pointer transition-all";
            emptyHint.innerHTML = '<i data-lucide="plus" class="h-4 w-4"></i>';
            emptyHint.onclick = () => {
                // Set default date to this day
                const offset = day.getTimezoneOffset() * 60000;
                const localDate = new Date(day.getTime() - offset).toISOString().split('T')[0];
                
                document.getElementById("pitch-date").value = localDate;
                document.getElementById("pitch-time").value = "10:00";
                
                document.getElementById("pitch-modal").classList.remove("hidden");
                document.getElementById("pitch-modal").classList.add("flex");
            };
            dayEl.appendChild(emptyHint);
        }

        dayMovies.forEach(m => {
          const greenlit = m.sold >= m.threshold;
          const movieEl = document.createElement("div");
          movieEl.className = `mini-movie ${greenlit ? 'greenlit' : ''}`;
          
          let statusOverlay = '';
          if (m.posterStatus === 'processing') {
              statusOverlay = '<div class="absolute inset-0 bg-black/60 flex items-center justify-center z-10"><span class="status-badge status-processing animate-pulse">Wird erstellt...</span></div>';
          } else if (m.posterStatus === 'failed') {
              statusOverlay = '<div class="absolute inset-0 bg-black/60 flex items-center justify-center z-10"><span class="status-badge status-failed">Fehler</span></div>';
          }

          // Create image element for lazy loading
          const imgContainer = document.createElement('div');
          imgContainer.className = 'w-full h-full absolute inset-0';
          
          // Always create img element for lazy loading, regardless of posterUrl in metadata
          const imgElement = document.createElement('img');
          imgElement.className = 'w-full h-full object-cover lazy-image';
          imgElement.dataset.movieId = m.id;
          imgElement.alt = m.title;
          
          // Use a placeholder initially, load on visibility
          imgElement.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iIzAyMDYxNyIvPjwvc3ZnPg==';
          
          // Load image when it becomes visible
          const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                loadMovieImage(m.id, imgElement);
                observer.unobserve(entry.target);
              }
            });
          }, {
            rootMargin: '50px' // Load images slightly before they enter viewport
          });
          observer.observe(imgElement);
          
          imgContainer.appendChild(imgElement);

          movieEl.innerHTML = `
              ${statusOverlay}
              <div class="mini-movie-info">
                  <div class="text-[8px] font-black text-cyan-400 mb-1">${new Date(m.premierAt).toLocaleTimeString('de-DE', {hour:'2-digit', minute:'2-digit'})}</div>
                  <div class="text-[10px] font-black text-white leading-tight uppercase truncate">${m.title}</div>
              </div>
          `;
          
          // Insert the image container
          movieEl.insertBefore(imgContainer, movieEl.firstChild);
          
          // Hover sound or haptic feedback (simulated)
          movieEl.addEventListener('mouseenter', () => {
              if (window.navigator.vibrate) window.navigator.vibrate(5);
          });

          movieEl.onclick = () => openDetail(m);
          dayEl.appendChild(movieEl);
          movieCount++;
        });
        grid.appendChild(dayEl);
        addedDays++;
      }
      lucide.createIcons();
    }

    function openDetail(m) {
      console.log("Opening detail for:", m.title);
      selectedMovie = m;
      updateDetailUI(m);
      const modal = document.getElementById("detail-modal");
      modal.classList.remove("hidden");
      modal.classList.add("flex");
    }

    function updateDetailUI(m) {
      console.log("Updating Detail UI for:", m.title);
      const progress = Math.min((m.sold / m.threshold) * 100, 100);
      const greenlit = m.sold >= m.threshold;
      const isOwner = currentUser && m.directorEmail === currentUser.username;

      document.getElementById("detail-title").textContent = m.title.toUpperCase();
      document.getElementById("detail-desc").textContent = m.description;
      document.getElementById("detail-director").textContent = m.director;
      document.getElementById("detail-avatar").textContent = m.director ? m.director.split(' ').map(n=>n[0]).join('') : '?';
      document.getElementById("detail-date").textContent = new Date(m.premierAt).toLocaleString('de-DE', {weekday:'short', day:'2-digit', month:'2-digit', hour:'2-digit', minute:'2-digit'});
      document.getElementById("detail-ticket-count").textContent = `${m.sold} / ${m.threshold}`;
      document.getElementById("detail-progress").style.width = `${progress}%`;
      
      const poster = document.getElementById("detail-poster");
      const loader = document.getElementById("detail-poster-loading");
      
      // Always try to load image, regardless of posterUrl in metadata
      poster.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjMwMCIgZmlsbD0iIzAyMDYxNyIvPjwvc3ZnPg==';
      poster.classList.add('lazy-image', 'loading');
      poster.classList.remove("hidden");
      loader.classList.add("hidden");
      
      // Load the image
      loadMovieImage(m.id, poster);

      const greenlitBadge = document.getElementById("greenlight-badge");
      if (greenlitBadge) {
        if (greenlit) greenlitBadge.classList.remove("hidden");
        else greenlitBadge.classList.add("hidden");
      }
      
      const ownerActions = document.getElementById("owner-actions");
      if (isOwner) ownerActions.classList.remove("hidden");
      else ownerActions.classList.add("hidden");

      document.getElementById("delete-btn").onclick = () => cancelMovie(m.id);
      document.getElementById("buy-btn").onclick = () => buyTicket(m.id);
    }

    function closeDetail() {
      const modal = document.getElementById("detail-modal");
      modal.classList.remove("flex");
      modal.classList.add("hidden");
      selectedMovie = null;
    }

    async function cancelMovie(id) {
      if (!confirm("M√∂chtest du dieses Filmprojekt wirklich absagen? Alle Reservierungen werden gel√∂scht.")) return;
      await fetch("/api/n8n/cancel-movie", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ movieId: id, userEmail: currentUser.username }) });
      closeDetail();
      loadMovies();
      showToast("Projekt wurde storniert.");
    }

    async function buyTicket(id) {
      const res = await fetch("/api/n8n/buy-ticket", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ movieId: id, user: { name: currentUser.name, username: currentUser.username } }) });
      const data = await res.json();
      if (data.error) showToast("Reservierung bereits aktiv.");
      else { showToast(data.isGreenlit ? "FILM FREIGEGEBEN!" : "Ticket gesichert!"); loadMovies(); }
    }

    // Enhanced mobile detection
    const isMobile = () => {
      const ua = navigator.userAgent;
      const mobileRegex = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone|Kindle|Silk|Mobile|Tablet/i;
      const isMobileUA = mobileRegex.test(ua);
      const hasTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
      const isSmallScreen = window.innerWidth < 768;
      
      console.log("Mobile detection:", { ua, isMobileUA, hasTouch, isSmallScreen });
      return isMobileUA || (hasTouch && isSmallScreen);
    };

    document.getElementById("login-btn").onclick = async () => {
      console.log("Login button clicked");
      const loginRequest = {
          scopes: ["User.Read"],
          prompt: "select_account"
      };

      // Always use redirect flow on mobile devices
      if (isMobile()) {
          console.log("Mobile device detected: Using loginRedirect with query response mode");
          const mobileLoginRequest = {
              scopes: loginRequest.scopes,
              prompt: loginRequest.prompt,
              responseMode: "query"  // Use query parameters instead of hash for mobile
          };
          try {
              await msalInstance.loginRedirect(mobileLoginRequest);
          } catch (e) {
              console.error("Redirect failed:", e);
              showToast("Login-Umleitung fehlgeschlagen: " + e.message);
          }
          return;
      }

      // Desktop: try popup first, fall back to redirect
      try {
        console.log("Desktop: Attempting loginPopup");
        const resp = await msalInstance.loginPopup(loginRequest);
        console.log("Login successful via popup:", resp);
        currentUser = resp.account;
        showApp();
      } catch (e) {
        console.error("Login popup failed:", e);
        // Fallback to redirect for various popup issues
        if (e.name === "BrowserAuthError") {
            console.log("BrowserAuthError detected, falling back to redirect. Error code:", e.errorCode);
            try {
                await msalInstance.loginRedirect(loginRequest);
            } catch (redirectError) {
                console.error("Redirect fallback also failed:", redirectError);
                showToast("Login fehlgeschlagen: " + redirectError.message);
            }
        } else {
            showToast("Login fehlgeschlagen: " + e.message);
        }
      }
    };
    document.getElementById("logout-btn").onclick = () => { msalInstance.logoutPopup(); };
    document.getElementById("open-pitch-modal").onclick = () => document.getElementById("pitch-modal").classList.replace("hidden", "flex");
    document.getElementById("close-pitch-modal").onclick = () => document.getElementById("pitch-modal").classList.replace("flex", "hidden");

    document.getElementById("pitch-form").onsubmit = async (e) => {
      e.preventDefault();
      
      const pitchDateStr = document.getElementById("pitch-date").value;
      const pitchTime = document.getElementById("pitch-time").value;
      
      // Client-side validation for weekends
      const pitchDate = new Date(pitchDateStr);
      const dayOfWeek = pitchDate.getDay(); // 0=Sunday, 6=Saturday
      if (dayOfWeek === 0 || dayOfWeek === 6) {
          showToast("Das Kino ist am Wochenende geschlossen!");
          return;
      }
      
      const btn = document.getElementById("submit-pitch");
      btn.disabled = true; btn.textContent = "KI-AGENTS ANALYSIEREN...";
      
      const premierAt = `${pitchDateStr}T${pitchTime}`;
      
      const payload = { 
          description: document.getElementById("pitch-desc").value, 
          threshold: parseInt(document.getElementById("pitch-threshold").value), 
          premierAt: premierAt, 
          director: currentUser.name, 
          directorEmail: currentUser.username 
      };
      try {
        const res = await fetch("/api/n8n/add-movie", { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify(payload) });
        const data = await res.json();
        if (res.ok) {
            document.getElementById("pitch-modal").classList.replace("flex", "hidden");
            document.getElementById("pitch-form").reset();
            document.getElementById("ai-generated-title").textContent = data.title;
            document.getElementById("ai-modal").classList.replace("hidden", "flex");
            loadMovies();
        } else if (data.error) {
            showToast(data.error);
        }
      } catch (err) { console.error(err); } finally { btn.disabled = false; btn.textContent = "FILMPROJEKT EINREICHEN"; }
    };
    document.getElementById("close-ai-modal").onclick = () => document.getElementById("ai-modal").classList.replace("flex", "hidden");
    function showToast(m) { const t = document.getElementById("toast"); document.getElementById("toast-msg").textContent = m; t.classList.remove("translate-y-20", "opacity-0"); setTimeout(() => t.classList.add("translate-y-20", "opacity-0"), 3000); }
    
    // Function to fix hash_empty_error by clearing hash and reloading
    function fixHashError() {
        console.log("Attempting to fix hash_empty_error...");
        if (window.location.hash) {
            console.log("Clearing hash:", window.location.hash);
            window.location.hash = "";
        }
        // Small delay before reload to ensure hash is cleared
        setTimeout(() => {
            window.location.reload();
        }, 100);
    }
    
    // Check for hash_empty_error on page load
    // Function to show/hide the how-to guide
    function toggleHowToGuide() {
        const guide = document.getElementById('how-to-guide');
        guide.classList.toggle('hidden');
        
        // Scroll to guide if showing
        if (!guide.classList.contains('hidden')) {
            setTimeout(() => {
                guide.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }
    }
    
    // Also make the "Schnellstart-Anleitung" button work
    document.addEventListener('click', function(e) {
        if (e.target.closest('a[href="#how-to-guide"]')) {
            e.preventDefault();
            toggleHowToGuide();
        }
    });
    
    window.addEventListener('load', () => {
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.get('hash_error') === 'true') {
            console.log("Detected hash_error parameter, fixing...");
            fixHashError();
        }
    });
    
    init();
  
// ==================== BANDWIDTH OPTIMIZATION: CSS for Lazy Loading ====================
const lazyLoadingStyle = document.createElement('style');
lazyLoadingStyle.textContent = `
  .lazy-image.loading {
    opacity: 0.3;
    filter: blur(5px);
    transition: opacity 0.3s ease, filter 0.3s ease;
  }
  
  .lazy-image.error {
    opacity: 0.5;
    background: linear-gradient(45deg, #020617 25%, #0f172a 50%, #020617 75%);
    background-size: 200% 200%;
    animation: shimmer 2s infinite;
  }
`;
document.head.appendChild(lazyLoadingStyle);



    </script>
</body>
</html>
